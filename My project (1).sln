using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Player : MonoBehaviour
{
    [SerializeField]
    private Rigidbody2D rb;
    [SerializeField]
    private Vector2 direction,direction2;
    [SerializeField]
    private float jumpForce = 5f;   
    [SerializeField]
    private float speed = 4;
    private bool onGround=true;
    [SerializeField]
    public Animator player;

     void OnCollisionEnter2D(Collision2D col) {
        if (col.gameObject.tag=="Teren") onGround=true; 
    }

    private  void OnCollisionExit2D(Collision2D col2){
        if (col2.gameObject.tag=="Teren") onGround=false;
    }

    void Start()
    {
        rb = GetComponent<Rigidbody2D>();
    }

    // Update is called once per frame
    private void Update()
    {
        if (Input.GetKeyDown(KeyCode.Space)) player.SetBool("SpacePressed",true);
        else player.SetBool("SpacePressed",false);
        if ((Input.GetKeyDown(KeyCode.W)) && onGround==true)
        {
            Debug.Log("Executed");
            rb.AddForce((Vector2.up*jumpForce*Time.fixedDeltaTime),ForceMode2D.Force);
           // rb.AddForce=(Vector2.up*50*jumpForce,ForceMode2D.Impulse);
        }
        direction = new Vector2(Input.GetAxisRaw("Horizontal"),0);
        player.SetFloat("Movement",MathF.Abs(Input.GetAxisRaw("Horizontal")));
        if(direction.x<0) transform.localScale=new Vector2(-0.4f,0.4f);
        else transform.localScale=new Vector2(0.4f,0.4f);
        rb.velocity=direction*speed;
    }

    void FixedUpdate()
    {
    }   
}
